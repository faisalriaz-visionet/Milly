window.REBASE=window.REBASE||{},REBASE.theme=REBASE.theme||{},REBASE.theme.collection=REBASE.theme.collection||{},function(){window.SwymCallbacks||(window.SwymCallbacks=[]),window.SwymCallbacks.push(function(t){$(document).on("variantChange",function(e){$(".product-quickview .product__wishlist").attr("data-variant-id",e.variant.id),t.initializeActionButtons(".product-quickview")})})}(),window.millyToggleQuickView=async function({handle:t,index:e,id:a,variantId:n,callback:i}){var c=e%3,o=e,r=null;try{r=(await fetch(`/products/${t}.json`).then(t=>t.json())).product.variants.filter(t=>t.id===n||t.sku===n.toString())}catch(t){console.error(t)}if(null!==r&&r.length>0&&(r=r[0]),void 0===t)return $(".product-quickview").remove(),!1;1===c&&(o=e+2),2===c&&(o=e+1),$(".product-quickview").remove(),fetch(`/products/${t}?view=quickview&variant=${r.id}`).then(t=>t.text()).then(t=>{if(i({success:!0}),$(".products .product").length>=o?($(`.products .product:nth-child(${o})`).after(t),$("html, body").animate({scrollTop:$(".product-quickview").offset().top-150},10)):$(".products").append(t),document.dispatchEvent(new CustomEvent("swym:collections-loaded")),"undefined"!=typeof nostojs&&nostojs(function(t){t.createRecommendationRequest().addEvent("vp",a.toString()).addElements(["nosto-quick-view"]).loadRecommendations()}),new REBASE.theme.Product({$container:$("#add-to-cart-form"),quickView:!0}),document.getElementById("product__json")){var e=JSON.parse(document.getElementById("product__json").innerHTML);window.dataLayer=window.dataLayer||[],dataLayer.push({ecommerce:{detail:{products:[{name:e.title,id:e.variants[0].sku,price:Shopify.formatMoney(e.price).replace("$",""),brand:"Milly",variant:$('input[name="single-option-select-1"]:checked').val()||""}]}}})}}).catch(t=>{i({success:!1,error:t}),console.error(t)})},function(t){t(document).on("mouseenter click",".product__swatch",function(e){e.preventDefault();var a=t(this),n=a.data(),i=a.parents(".product");a.siblings().removeClass("product__swatch--selected"),a.addClass("product__swatch--selected"),""!==n.variantImage&&i.find(".product__image--primary").attr("src",n.variantImage).attr("data-src",n.variantImage),""!==n.variantImageSecondary&&i.find(".product__image--secondary").attr("src",n.variantImageSecondary).attr("data-src",n.variantImageSecondary),i.find(".product__price--current").text(n.variantPrice),i.find(".product__price--old").text(n.variantCompareAtPrice),i.toggleClass("product--on-sale",n.onSale),""!==n.variantUrl&&i.find(".product__content a").attr("href",n.variantUrl)}),t(document).on("click",".product__quick-view-button",function(e){var a=t(this),n=this.dataset;a.text("..."),e.preventDefault(),millyToggleQuickView({handle:n.productHandle,index:parseInt(n.productIndex),id:parseInt(n.productId),variantId:parseInt(n.variantId),callback:function(t){a.text("Quick View")}})})}(jQuery);