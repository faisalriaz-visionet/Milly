window.REBASE=window.REBASE||{},REBASE.theme=REBASE.theme||{},function(i){function t(t){this.options=t,this.rowContainer=this._getRowContainer(),this.navItems=this._getNavItems(),this.singleWidth=this._getSingleWidth(),this.itemCount=this._getItemCount(),this.activeIndex=0,this.lastScrollDistance=0,i(this.rowContainer).on("scroll",this._updateScrollDistance.bind(this)),i(window).on("resize",_.debounce(this._updateSingleWidth.bind(this),300)),i(this.navItems).on("click",this._handleClickNav.bind(this)),this.scrollTo=this._scrollTo.bind(this),this._updateNav.apply(this)}i(function(){function t(){REBASE.theme.siteHeaderHeight=i(".site-header").outerHeight(),i(".site-header").addClass("site-header--fixed"),i("body").css({"padding-top":REBASE.theme.siteHeaderHeight+"px"})}function e(t){i(".site-header__promo-item.active").removeClass("active").fadeOut(200,function(){i('.site-header__promo-item[data-index="'+t+'"]').addClass("active").fadeIn(200)})}function n(t){t.forEach(function(t){var e=i("#related-product__template").html(),n=_.template(e,t);i(".section--related-products .products").append(n({product:t})),REBASE&&REBASE.lists&&REBASE.lists.updateActiveProductVariant({product_id:t.id,variant_id:t.variants[0].id})})}function o(t){fetch("/recommendations/products.json?product_id="+t+"&limit=5").then(function(t){return t.json()}).then(function(t){t.products&&t.products.length?n(t.products):i(".section--related-products").hide()})}i(document).on("click","[data-search-toggle]",function(t){var e=i(".site-header__search");t.preventDefault(),e.toggleClass("visible"),e.hasClass("visible")&&e.find("input").focus()}),setTimeout(t,200),i(window).on("resize",_.debounce(t,250)),1<i(".site-header__promo-item").length&&setInterval(function(){var t=i(".site-header__promo-item.active").data("index");t>=i(".site-header__promo-item").length?e(1):e(t+1)},6e3),i(document).on("click",function(t){var e=i(".mobile-navigation, .mobile-menu-toggle");e.is(t.target)||0!==e.has(t.target).length||i("body").removeClass("mobile-nav-opened")}),i(document).on("click",".mobile-menu-toggle",function(){var t=i("body");!function(t){var e=document.querySelector("body"),n=0;t?(n=window.pageYOffset,e.style.overflow="hidden",e.style.position="fixed",e.style.top="-"+n+"px",e.style.width="100%"):(e.style.removeProperty("overflow"),e.style.removeProperty("position"),e.style.removeProperty("top"),e.style.removeProperty("width"),window.scrollTo(0,n))}(!t.hasClass("mobile-nav-opened")),t.toggleClass("mobile-nav-opened")}),i(document).on("click","[data-mobile-menu-toggle]",function(t){var e=i(this);t.preventDefault(),e.attr("aria-expanded",!e.parent().hasClass("open")),e.parent().toggleClass("open"),e.parent().find("> ul").slideToggle()}),i(document).on("click",".mobile-navigation__level-1-item.has-children",function(t){t.preventDefault(),i('.mobile-navigation__panel--2[data-slug="'+i(this).data("slug")+'"]').css({left:0})}),i(document).on("click",".mobile-navigation__panel-back",function(t){t.preventDefault(),i(".mobile-navigation__panel--2").css({left:"100vw"})}),i(document).on("click",".site-nav__item.hover-intent.has-children .site-nav__item-link",function(t){("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&!i(this).hasClass("open")&&t.preventDefault()}),i(".hover-intent.has-children").hoverIntent({over:function(t){var e=i(this);i(".hover-intent").removeClass("hovered"),e.toggleClass("hovered"),e.hasClass("has-children")&&(i("body").addClass("nav-opened"),setTimeout(function(){e.find(".site-nav__item-link").addClass("open")},100))},out:function(){i(this).removeClass("hovered").find(".site-nav__item-link").removeClass("open"),i("body").removeClass("nav-opened")},timeout:200}),i("#forgot-password").on("click",function(){i("#recover-password-form").show(),i("#customer-login-form").hide()}),i("#forgot-password-cancel").on("click",function(){i("#recover-password-form").hide(),i("#customer-login-form").show()}),i(document).on("click",".filter-toggle, .filter-container__apply",function(t){t.preventDefault(),i(".filter-container").toggleClass("filter-container--visible")}),i(document).on("click",".site-header__search .btn",function(t){var e=i(this);t.preventDefault(),e.parent().find("form").addClass("visible").find("input").focus(),e.find("span").hide()}),i(document).on("click",function(t){var e=i(".site-header__search"),n=i(".site-header__action-dropdown, .site-header__account-action--logged-in");e.is(t.target)||0!==e.has(t.target).length||(e.find("form").removeClass("visible"),setTimeout(function(){e.find(".btn span").show()},100)),n.is(t.target)||0!==n.has(t.target).length||n.removeClass("visible")}),i(document).on("click",".site-header__account-action--logged-in",function(t){t.preventDefault(),i(".site-header__action-dropdown").addClass("visible")}),i(document).on("click",".toggle__label",function(t){var e=i(this).parent();t.preventDefault(),e.find(".toggle__content").stop().slideToggle(200),e.toggleClass("visible")}),i(document).on("click",".back-to-top",function(t){t.preventDefault(),i("html,body").animate({scrollTop:0},200)}),i(document).on("click",".dropdown__label",function(){var t=i(this).parent(".dropdown");t.hasClass("dropdown--open")?(i(".dropdown__options").removeClass("dropdown__options--visible"),t.removeClass("dropdown--open")):(t.find(".dropdown__options").addClass("dropdown__options--visible"),t.addClass("dropdown--open"),t.find(".dropdown__options").focus())}),i(document).on("click",".dropdown__option:not(.dropdown__option--sort)",function(){var t=i(this),e=t.parents(".dropdown");t.find("input").prop("checked",!0).trigger("change"),t.hasClass("dropdown__option--swatch")?e.find(".dropdown__label div span:nth-child(2)").html(t.find(".dropdown-swatch").clone()):e.find(".dropdown__label div span:nth-child(2)").text(t.data("label")),e.find(".dropdown__options").removeClass("dropdown__options--visible"),e.find(".dropdown__option").removeClass("dropdown__option--selected"),t.addClass("dropdown__option--selected"),e.removeClass("dropdown--open"),e.next().focus()}),i(document).on("mouseup",function(t){var e=i(".dropdown");e.is(t.target)||0!==e.has(t.target).length||(i(".dropdown__options").removeClass("dropdown__options--visible"),e.removeClass("dropdown--open"))}),i(document).on("keypress",function(t){var e=i(t.target),n=e.parents(".dropdown");!n.is(t.target)&&0<n.has(t.target).length&&13===t.which&&(n.find(".dropdown__label div span:nth-child(2)").text(e.data("label")),n.find(".dropdown__options").removeClass("dropdown__options--visible"),n.find(".dropdown__option").removeClass("dropdown__option--selected"),e.addClass("dropdown__option--selected"),n.removeClass("dropdown--open"),n.next().focus())}),i(document).on("click",".gift-with-purchase__product .btn[data-gwp-variant-id]",function(t){t.preventDefault(),CartJS.addItem(i(this).data("gwp-variant-id"),1,{_gwp_promo:!0})}),i(document).on("click",".filter-panel__header-btn:not(.ais-Panel-collapseButton)",function(t){var e=i(this).parents(".filter-panel");e.attr("aria-expanded",e.hasClass("filter-panel--collapsed")),e.toggleClass("filter-panel--collapsed")}),i(document).on("click",".product-quickview__thumbs a",function(t){t.preventDefault();var e=i(this);e.parents(".product-quickview__gallery").find(".product-quickview__image img").attr("src",e.data("src"))}),i(document).on("click",".tab",function(t){var e=i(this),n=e.data("slug");e.siblings().removeClass("tab--selected"),e.addClass("tab--selected"),e.parents(".tab-container").find(".tab-content").removeClass("tab-content--selected"),e.parents(".tab-container").find('.tab-content[data-slug="'+n+'"]').addClass("tab-content--selected")}),(i("body").hasClass("product-template")||i("body").hasClass("cart-template"))&&("undefined"!=typeof rehash_related_products&&rehash_related_products.length?n(rehash_related_products):document.getElementById("product__json")?o(JSON.parse(document.getElementById("product__json").innerHTML).id):o(JSON.parse(document.getElementById("cart-item__json").innerHTML).product_id))}),REBASE.theme.ProductListing=(t.prototype=i.extend({},t.prototype,{_getRowContainer:function(){return this.options.container.find(this.options.rowClass)},_getNavItems:function(){return this.options.container.find(this.options.navClass)},_getSingleWidth:function(){return this.rowContainer.find(".product-listing__item").width()+this.options.gutterWidth},_getItemCount:function(){return this.rowContainer.find(this.options.itemClass).length},_getNavDirection:function(t){return void 0!==t.data("next")?"next":void 0!==t.data("prev")?"prev":void 0},_updateScrollDistance:function(){var t=this.rowContainer.find(this.options.itemClass),n=!1;return this.lastScrollDistance=this.rowContainer.scrollLeft(),t.each(function(t,e){n||0<=i(e).position().left&&(n=!0,this.activeIndex=t)}.bind(this)),this.lastScrollDistance},_updateSingleWidth:function(){return this.singleWidth=this._getSingleWidth(),this.singleWidth},_scrollTo:function(t){this.rowContainer.addClass("no-snap"),this.rowContainer.stop().animate({scrollLeft:t},300,function(){this.rowContainer.removeClass("no-snap")}.bind(this)),this._updateNav()},_updateNav:function(){this.navItems.each(function(t,e){var n=i(e);"next"===this._getNavDirection(n)&&n.toggleClass("visible",this.activeIndex<=this.itemCount-this.options.perRow),"prev"===this._getNavDirection(n)&&n.toggleClass("visible",1<=this.activeIndex)}.bind(this))},_handleClickNav:function(t){var e=i(t.currentTarget),n=this.lastScrollDistance;e.hasClass("visible")&&("next"===this._getNavDirection(e)&&(this.activeIndex=this.activeIndex>=this.itemCount?this.itemCount-1:this.activeIndex+1,n+=this.singleWidth),"prev"===this._getNavDirection(e)&&(this.activeIndex=this.activeIndex<0?0:this.activeIndex-1,n-=this.singleWidth),this._updateNav(),this._scrollTo(n))}}),t)}(jQuery);